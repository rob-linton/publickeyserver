<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ACE Protocol Specification - PublicKeyServer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0d1117;
            --bg-secondary: #161b22;
            --bg-tertiary: #21262d;
            --text-primary: #c9d1d9;
            --text-secondary: #8b949e;
            --text-bright: #f0f6fc;
            --accent-primary: #58a6ff;
            --accent-success: #3fb950;
            --accent-warning: #f0883e;
            --accent-error: #f85149;
            --border-color: #30363d;
        }
        
        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            font-family: 'JetBrains Mono', 'Fira Code', 'SF Mono', Consolas, 'Liberation Mono', Menlo, monospace;
            margin: 0;
            padding: 0;
            line-height: 1.6;
            font-size: 14px;
        }
        
        a {
            color: var(--accent-primary);
            text-decoration: none;
        }
        
        a:hover {
            text-decoration: underline;
            text-decoration-style: dotted;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 30px;
            padding: 20px 0;
        }
        
        h1 {
            font-size: 2.5em;
            margin: 10px 0;
            font-weight: 400;
            letter-spacing: -1px;
        }
        
        h1::before {
            content: "$ ";
            color: var(--accent-success);
        }
        
        h2 {
            font-size: 1.8em;
            margin-bottom: 20px;
            color: var(--text-bright);
            font-weight: 400;
        }
        
        h2::before {
            content: "## ";
            color: var(--accent-success);
            opacity: 0.6;
        }
        
        h3 {
            font-size: 1.3em;
            margin: 25px 0 15px 0;
            color: var(--accent-primary);
            font-weight: 400;
        }
        
        h3::before {
            content: "### ";
            color: var(--text-secondary);
            opacity: 0.5;
        }
        
        h4 {
            margin: 15px 0 10px 0;
            color: var(--text-bright);
            font-weight: 400;
        }
        
        p {
            line-height: 1.8;
            margin-bottom: 16px;
        }
        
        .intro {
            font-size: 1em;
            color: var(--text-secondary);
            max-width: 900px;
            margin: 15px 0;
            font-style: italic;
        }
        
        .intro::before {
            content: "// ";
            color: var(--text-secondary);
        }
        
        pre, code {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-family: inherit;
            font-size: 0.95em;
        }
        
        code {
            padding: 2px 6px;
            color: var(--accent-warning);
        }
        
        pre {
            padding: 16px;
            overflow-x: auto;
            line-height: 1.45;
        }
        
        pre code {
            background: none;
            border: none;
            padding: 0;
            color: inherit;
        }
        
        .nav-menu {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
            padding: 15px 0;
        }
        
        .nav-menu a {
            padding: 6px 12px;
            color: var(--text-secondary);
            border: 1px solid transparent;
            border-radius: 6px;
            transition: all 0.2s ease;
            font-size: 0.9em;
        }
        
        .nav-menu a:hover {
            color: var(--text-bright);
            background-color: var(--bg-secondary);
            border-color: var(--border-color);
            text-decoration: none;
        }
        
        .section {
            margin: 40px 0;
            padding: 20px 0;
            border-bottom: 1px solid var(--border-color);
        }
        
        .section:last-child {
            border-bottom: none;
        }
        
        ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        ul li {
            margin: 8px 0;
            padding-left: 20px;
            position: relative;
            color: var(--text-secondary);
        }
        
        ul li:before {
            content: "$";
            position: absolute;
            left: 0;
            color: var(--accent-success);
        }
        
        ul li strong {
            color: var(--text-primary);
        }
        
        .info-box {
            background-color: var(--bg-secondary);
            border-left: 3px solid var(--accent-primary);
            padding: 15px;
            margin: 20px 0;
            border-radius: 6px;
            font-size: 0.95em;
        }
        
        .info-box ol {
            margin: 0;
            padding-left: 20px;
        }
        
        .info-box li {
            margin: 8px 0;
        }
        
        .warning-box {
            background-color: rgba(240, 136, 62, 0.1);
            border-left: 3px solid var(--accent-warning);
            border: 1px solid rgba(240, 136, 62, 0.3);
            padding: 15px;
            margin: 20px 0;
            border-radius: 6px;
            font-size: 0.95em;
        }
        
        .warning-box strong {
            color: var(--accent-warning);
        }
        
        .github-btn {
            display: inline-block;
            padding: 10px 20px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            text-decoration: none;
            color: var(--text-primary);
            font-weight: 400;
            transition: all 0.2s ease;
            margin: 5px;
            background-color: var(--bg-secondary);
            font-size: 0.9em;
        }
        
        .github-btn:hover {
            border-color: var(--accent-primary);
            color: var(--text-bright);
            text-decoration: none;
            background-color: var(--bg-tertiary);
        }
        
        .github-btn span {
            opacity: 0.8;
        }
        
        .github-icon {
            display: inline-block;
            width: 20px;
            height: 20px;
            vertical-align: middle;
            margin-right: 8px;
            fill: currentColor;
        }
        
        .footer-github-icon {
            display: inline-block;
            width: 16px;
            height: 16px;
            vertical-align: middle;
            margin-right: 5px;
            fill: currentColor;
        }
        
        .footer-github-link:hover {
            color: var(--accent-primary) !important;
        }
        
        .nav-github-icon {
            display: inline-block;
            width: 16px;
            height: 16px;
            vertical-align: middle;
            margin-right: 6px;
            fill: currentColor;
        }
        
        .highlight-box {
            background-color: var(--bg-secondary);
            border-left: 3px solid var(--accent-primary);
            padding: 15px;
            margin: 20px 0;
            border-radius: 6px;
        }
        
        hr {
            border: none;
            border-top: 1px solid var(--border-color);
            margin: 40px 0;
        }
    </style>
    
    <!-- GitHub SVG Icon -->
    <svg style="display: none;">
        <symbol id="github-icon" viewBox="0 0 24 24">
            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
        </symbol>
    </svg>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Anonymous Certificate Enrollment protocol (ACE)</h1>
            <p class="intro">A simple, opinionated protocol for creating, providing and validating anonymous certificates for encryption without identity</p>
            <div class="nav-menu">
                <a href="index.html">Documentation Hub</a>
                <a href="#abstract">Abstract</a>
                <a href="#authentication">Authentication</a>
                <a href="#implementation">Implementation</a>
                <a href="https://github.com/rob-linton/publickeyserver"><svg class="nav-github-icon"><use href="#github-icon"></use></svg>GitHub</a>
            </div>
        </div>
        
        <div class="highlight-box">
            <p>This protocol is loosely based on the Enrollment over Secure Transport <a href="https://tools.ietf.org/html/rfc7030">EST</a> (RFC7030) protocol.<br>
            https://tools.ietf.org/html/rfc7030</p>
        </div>
        
        <section id="abstract" class="section">
            <h2>Abstract</h2>
            <p>RFC7030 (EST) provides a secure method for creating and verifying certificates.</p>
            <p>The ACE protocol is a simple, opinionated version of EST, developed for the purpose of creating, providing and validating anonymous certificates that may be used for encryption without identity.</p>
            <p>The ACE protocol is designed (as is EST) to provide an automated method for creating, retrieving and verifying certificates. However this protocol removes all requirement for identification, other than the verification that a certificate is bound to an anonymous alias.</p>
            <p>This protocol has been designed to facilitate an end-to-end encrypted communication such that the private key associated with an alias never leaves the client device and that the device is associated with an anonymous alias and nothing more.</p>
            <p>The assumption being, that to communicate securely and anonymously using an end-to-end encryption protocol that can be securely verified by all parties, all one needs to know is the <code>alias</code> of the destination individual.</p>
        </section>
        
        <section id="detail" class="section">
            <h2>Detail</h2>
            <p>The ACE protocol is designed to be as simple as possible with very little (if any) customization options.</p>
            <p>RSA key pairs are RSA2048.</p>
            <p>X.509 certificates are signed using the following algorithm:</p>
            <p><code>SHA512WITHRSA</code></p>
            <p>Alias's are automatically assigned and are a random group of three words separated by a hyphen.</p>
            <p>eg:
            missions-locks-sox.publickeyserver.org</p>
            <p>Optional extra information may be baked into an X.509 certificate. The base OID for your info is as follows:</p>
            <p><code>iso.org.dod.internet.private.enterprise.publickeyserver (1.3.6.1.4.1.57055)</code></p>
            <p>Optional information must be base64 encoded, no assumption is made as to the data format provided.</p>
        </section>
        
        <section id="authentication" class="section">
            <h2>Authentication</h2>
            <p>No authentication will be used to access a server providing the ACE protocol.</p>
        </section>
        
        <section id="implementation" class="section">
            <h2>Implementation</h2>
            <p>The ACE protocol uses the same REST API mechanism as EST and provides the following endpoints:</p>
            <p><code>GET /cacerts</code><br>
            <code>GET /simpleenroll</code><br>
            <code>POST /simpleenroll</code><br>
            <code>GET /serverkeygen</code></p>
            <p>Because the EST protocol does not provide a mechanism for the retrieval of public keys, the extra endpoint has been implemented:</p>
            <p><code>GET /cert?alias={alias}</code></p>
            <p>OR</p>
            <p><code>GET /cert/{alias}</code></p>
            <p>OR</p>
            <p><code>GET {alias}.publickeyserver.org</code></p>
        </section>
        
        <section class="section">
            <h2>GET /cacerts</h2>
            <p>Returns a JSON snippet of the certificate chain in PEM format.</p>
            <pre><code>Return format:  
  application/json  
</code></pre>
        </section>
        
        <section class="section">
            <h2>GET /simpleenroll</h2>
            <p>The quick way to get one</p>
            <p>However you should not use the quick way as it will generate a private/public RSA2048 key pair
            on your behalf...which means it knows your private key, if only for a moment.</p>
        </section>
        
        <section class="section">
            <h2>POST /simpleenroll</h2>
            <p>Creates a certificate and returns it in PEM format</p>
            <pre><code>POST BODY  

Post format:  
  application/json    


{  
  "key"  : "[public key in PEM format (RSA2048)]"    *mandatory
  "data" : "[BASE64ENCODED DATA]"                    *optional
}
</code></pre>
            <p>Where:</p>
            <p>data:</p>
            <p>An optional list of arbitrary data in JSON format</p>
            <p>Allowed characters.</p>
            <pre><code>[a..z|A..Z|[0..9]:|/|;|.|?|&amp;|#|!|$|%|^|*|(|)|[|]|{|}|&lt;|&gt;|,|_|-|+|=|@|~|
</code></pre>
            <p>Each optional data piece is has no limit to it's data length</p>
            <pre><code>Return format:  
  application/json  
  
  with embedded OID's:
  OID 1.3.6.1.4.1.57055
  
</code></pre>
            <p>Official listing:
            http://oid-info.com/cgi-bin/display?oid=1.3.6.1.4.1.57055&amp;a=display</p>
        </section>
        
        <section class="section">
            <h2>GET /cert?alias={alias}</h2>
            <p>GET {alias}.publickeyserver.org</p>
            <p>GET /cert/{alias}</p>
            <hr>
            <p>Returns the associated certificate with the alias in x.509 PEM format.</p>
        </section>
        
        <section class="section">
            <h2>GET /serverkeygen</h2>
            <p>Returns a public/private key pair (generally for testing)</p>
        </section>
        
        <div style="text-align: center; margin-top: 60px; padding-top: 40px; border-top: 1px solid var(--border-color);">
            <p style="color: var(--text-secondary);">© 2024 Public Key Server Project | <a href="https://github.com/rob-linton/publickeyserver" class="footer-github-link" style="color: var(--text-secondary); transition: color 0.2s ease;"><svg class="footer-github-icon"><use href="#github-icon"></use></svg>GitHub Repository</a></p>
        </div>
    </div>
</body>
</html>
